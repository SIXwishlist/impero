<!DOCTYPE html>
<html>
<head>
    {% include '_head.twig' %}
</head>
<body id="vue-app">

{% if not _request.isAjax() %}
<nav class="navbar navbar-default">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Derive</a>
        </div>

        {% if _auth.isLoggedIn() %}
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                {{ _menuService.build('admin') | raw }}

                {{ _pluginService.make('Pckg\\Auth\\Controller\\Auth', 'getUserHeader') | raw }}

                {{ _pluginService.make('Derive\\Platform\\Controller\\Platform', 'getUserHeader') | raw }}
            </div>
        {% endif %}
    </div>
</nav>
{% endif %}

<div class="container-fluid">
    <!-- alerts -->
    <pckg-bootstrap-alert v-for="alert in alerts" :style="modal.style" :dismissable="modal.dismissable"
                          :text="modal.text"></pckg-bootstrap-alert>
    <!-- modals -->
    <pckg-bootstrap-modal v-for="modal in modals" :style="modal.style" :dismissable="modal.dismissable"
                          :body="modal.body" :header="modal.header" :visible="modal.visible"
                          :id="modal.id"></pckg-bootstrap-modal>
    <!-- content -->
    {% block content %}{{ content | raw }}{% endblock %}
</div>

{% include '_foot.twig' %}

</body>
</html>